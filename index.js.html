<html>

<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        url = 'https://demo2211087.mockable.io/mock'
        const getdata = async () => {
            try {
                const response = await axios.post(url, {})
                console.log(response)
                return (response['data'])

            }
            catch (error) {
                console.log(error)
                document.getElementById('status').textContent = 'Error'
                return 'Error'
            }


        }
        function render_table(all_data) {

            //all_data = [{ 'name': 'Name1', 'email': 'Email123' }, { 'name': 'Name1', 'email': 'Email123' }, { 'name': 'Name1', 'email': 'Email123' }, { 'name': 'Name1', 'email': 'Email123' }]
            if (all_data == 'Error') {
                return

            }

            console.log('alldata', all_data)
            x = all_data['companies']
            console.log(x,"---")
            for (let data in all_data['companies']) {
                console.log(all_data['companies'])
                a = document.getElementById('tbody')
                var elem = document.createElement('tr')
                var name = document.createElement('td')
                name.appendChild(document.createTextNode(all_data['companies'][data]['name']))
                var email = document.createElement('td')
                email.appendChild(document.createTextNode(all_data['companies'][data]['email']))
                elem.appendChild(name)
                elem.appendChild(email)
                a.appendChild(elem);
            }
            document.getElementById('status').textContent = 'Completed'

        }</script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

</head>

<body>
    <script>


    </script>
    <div style='margin : 50px'>
        <h3>Status</h3>
        <p id='status'>Processing</p>
    </div>
    <div class="table-responsive" style='margin: 50px;border: solid;'>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Company</th>
                    <th scope="col">Email</th>
                </tr>
            </thead>
            <tbody id='tbody'>
            </tbody>
            <thead>
        </table>
    </div>
    <script>
        const main = async () => {
            render_table(await getdata());
        };
        main()
    </script>
</body>

</html>